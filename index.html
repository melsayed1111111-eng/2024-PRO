<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Ø§Ù„Ø¹Ø¨ 2048 Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†. Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ø£Ø´Ù‡Ø± Ù„ØªÙ†Ø´ÙŠØ· Ø§Ù„Ø¹Ù‚Ù„. ØªØ¹Ù„Ù… Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ÙÙˆØ² ÙˆØ­Ù‚Ù‚ Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø©.">
    <title>Ù„Ø¹Ø¨Ø© 2048 - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© | Ø§Ù„Ø¹Ø¨ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</title>

    <!-- Ù…ÙƒØªØ¨Ø§Øª Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>

    <!-- Ø§Ù„Ø®Ø·ÙˆØ· -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        /* --- Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª (CSS) --- */
        
         :root {
            --bg-color: #faf8ef;
            --grid-bg: #bbada0;
            --cell-bg: rgba(238, 228, 218, 0.35);
            --text-dark: #776e65;
            --primary-btn: #8f7a66;
            --undo-btn: #e67e22;
            --store-btn: #27ae60;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            user-select: none;
            overscroll-behavior: none;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 90%;
            max-width: 500px;
            margin-top: 20px;
        }
        
        .title {
            font-size: 60px;
            font-weight: 900;
            margin: 0;
            color: var(--text-dark);
        }
        
        .scores-container {
            display: flex;
            gap: 5px;
        }
        
        .score-box {
            background: #bbada0;
            padding: 10px 20px;
            border-radius: 6px;
            color: white;
            text-align: center;
            min-width: 70px;
        }
        
        .score-label {
            font-size: 12px;
            opacity: 0.8;
            text-transform: uppercase;
        }
        
        .score-val {
            font-size: 20px;
            font-weight: bold;
        }
        
        .controls-bar {
            display: flex;
            justify-content: space-between;
            width: 90%;
            max-width: 500px;
            margin: 15px 0;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.1s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn-new { background-color: var(--primary-btn); }
        .btn-undo { background-color: var(--undo-btn); position: relative; }
        
        .undo-count {
            background: white;
            color: var(--undo-btn);
            border-radius: 50%;
            width: 20px; height: 20px;
            display: flex; justify-content: center; align-items: center;
            font-size: 12px;
        }
        
        .btn-store { background-color: var(--store-btn); }
        
        .game-container {
            position: relative;
            width: 90vw; height: 90vw;
            max-width: 500px; max-height: 500px;
            background: var(--grid-bg);
            border-radius: 10px;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 10px;
            touch-action: none;
        }
        
        .grid-cell {
            background: var(--cell-bg);
            border-radius: 5px;
            width: 100%; height: 100%;
        }
        
        .tile {
            position: absolute;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; border-radius: 5px;
            transition: all 0.15s ease-in-out;
            z-index: 10;
            animation: appear 0.2s ease-in-out;
        }
        
        @keyframes appear {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª */
        .tile-2 { background: #eee4da; color: #776e65; font-size: 45px; }
        .tile-4 { background: #ede0c8; color: #776e65; font-size: 45px; }
        .tile-8 { background: #f2b179; color: #f9f6f2; font-size: 40px; }
        .tile-16 { background: #f59563; color: #f9f6f2; font-size: 35px; }
        .tile-32 { background: #f67c5f; color: #f9f6f2; font-size: 35px; }
        .tile-64 { background: #f65e3b; color: #f9f6f2; font-size: 30px; }
        .tile-128 { background: #edcf72; color: #f9f6f2; font-size: 25px; box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.3); }
        .tile-256 { background: #edcc61; color: #f9f6f2; font-size: 25px; box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.4); }
        .tile-512 { background: #edc850; color: #f9f6f2; font-size: 25px; }
        .tile-1024 { background: #edc53f; color: #f9f6f2; font-size: 20px; }
        .tile-2048 { background: #edc22e; color: #f9f6f2; font-size: 20px; box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.5); }
        
        /* Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† */
        .ad-container {
            width: 90%; max-width: 500px;
            min-height: 100px; /* Ø²Ø§Ø¯Øª Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† */
            background: #f0f0f0;
            margin-top: 20px;
            border-radius: 5px;
            display: flex; justify-content: center; align-items: center;
            border: 1px solid #ddd;
            overflow: hidden;
        }

        /* --- ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†ØµÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (SEO) --- */
        .article-container {
            width: 90%;
            max-width: 600px;
            margin-top: 30px;
            margin-bottom: 50px;
            color: #555;
            line-height: 1.8;
            text-align: justify;
        }

        .article-container h2 {
            color: #776e65;
            border-bottom: 2px solid #bbada0;
            padding-bottom: 10px;
            margin-top: 30px;
        }

        .article-container p {
            margin-bottom: 15px;
            font-size: 16px;
        }

        .article-container ul {
            padding-right: 20px;
        }

        .article-container li {
            margin-bottom: 10px;
        }

        .footer-links {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ccc;
            text-align: center;
            font-size: 14px;
        }

        .footer-links a {
            color: #776e65;
            text-decoration: none;
            margin: 0 10px;
        }

        /* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none; justify-content: center; align-items: center;
            z-index: 100; backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: white; padding: 30px; border-radius: 15px;
            width: 90%; max-width: 400px; text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .store-item {
            background: #f1f1f1; padding: 15px; margin: 10px 0;
            border-radius: 10px; display: flex; justify-content: space-between;
            align-items: center; cursor: pointer; transition: 0.2s;
        }
        .store-item:hover { background: #e1e1e1; }
        .price-tag { background: #27ae60; color: white; padding: 5px 10px; border-radius: 15px; font-size: 14px; }
        .close-modal { margin-top: 15px; background: #e74c3c; width: 100%; }
    </style>
</head>

<body>

    <div class="header-container">
        <h1 class="title">2048</h1>
        <div class="scores-container">
            <div class="score-box">
                <div class="score-label">Ø§Ù„Ù†ØªÙŠØ¬Ø©</div>
                <div class="score-val" id="score">0</div>
            </div>
            <div class="score-box">
                <div class="score-label">Ø§Ù„Ø£ÙØ¶Ù„</div>
                <div class="score-val" id="best-score">0</div>
            </div>
        </div>
    </div>

    <div class="controls-bar">
        <button class="btn btn-store" onclick="openStore()">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</button>
        <button class="btn btn-undo" onclick="undoMove()">â†©ï¸ ØªØ±Ø§Ø¬Ø¹ <span class="undo-count" id="undo-display">3</span></button>
        <button class="btn btn-new" onclick="startNewGame()">Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>

    <div class="game-container" id="game-board">
        <!-- Ø§Ù„Ø®Ù„Ø§ÙŠØ§ ØªØªÙˆÙ„Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -->
        <div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div>
        <div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div>
        <div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div>
        <div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div>
    </div>

    <!-- Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† (ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ ÙƒÙˆØ¯ ins Ù‡Ù†Ø§ ÙƒÙ…Ø§ Ø§ØªÙÙ‚Ù†Ø§) -->
    <div class="ad-container" id="ad-slot-1">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6359877001554870" crossorigin="anonymous"></script>
        <!-- Ø¶Ø¹ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© ins Ù‡Ù†Ø§ -->
        <span style="color:#999; font-size:12px;">Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©</span>
    </div>

    <!-- =============================================== -->
    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†ØµÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù‚Ø¨ÙˆÙ„ Ø£Ø¯Ø³Ù†Ø³) -->
    <!-- =============================================== -->
    <div class="article-container">
        <h2>Ø¹Ù† Ù„Ø¹Ø¨Ø© 2048 Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h2>
        <p>Ù„Ø¹Ø¨Ø© 2048 Ù‡ÙŠ ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ø£Ø´Ù‡Ø± Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŒ ØµÙ…Ù…Ù‡Ø§ Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ ØºØ§Ø¨Ø±ÙŠÙŠÙ„ Ø³ÙŠØ±ÙˆÙ„ÙŠ. ØªØ¹ØªÙ…Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù„Ù‰ Ù…Ø¨Ø¯Ø£ Ø¨Ø³ÙŠØ· ÙˆÙ„ÙƒÙ†Ù‡ ÙŠØ³Ø¨Ø¨ Ø§Ù„Ø¥Ø¯Ù…Ø§Ù†: Ø¯Ù…Ø¬ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø­Ø±ÙŠ 2048. Ø¥Ù†Ù‡Ø§ Ù„ÙŠØ³Øª Ù…Ø¬Ø±Ø¯ Ù„Ø¹Ø¨Ø© Ù„ØªØ¶ÙŠÙŠØ¹ Ø§Ù„ÙˆÙ‚ØªØŒ Ø¨Ù„ Ù‡ÙŠ ØªÙ…Ø±ÙŠÙ† Ø±ÙŠØ§Ø¶ÙŠ Ù…Ù…ØªØ§Ø² Ù„Ø¹Ù‚Ù„Ùƒ ÙŠØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ ÙˆØ§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ.</p>

        <h2>ÙƒÙŠÙ ØªÙ„Ø¹Ø¨ ÙˆØªØ±Ø¨Ø­ØŸ</h2>
        <p>Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø³Ù‡Ù„Ø© Ø¬Ø¯Ø§Ù‹ ÙˆÙŠÙ…ÙƒÙ† Ù„Ø£ÙŠ Ø´Ø®Øµ ØªØ¹Ù„Ù…Ù‡Ø§ ÙÙŠ Ø«ÙˆØ§Ù†Ù:</p>
        <ul>
            <li><strong>Ø§Ù„ØªØ­Ø±ÙŠÙƒ:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø³Ù‡Ù… (ÙÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±) Ø£Ùˆ Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø¥ØµØ¨Ø¹Ùƒ (ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„) Ù„ØªØ­Ø±ÙŠÙƒ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª ÙÙŠ Ø§ØªØ¬Ø§Ù‡ ÙˆØ§Ø­Ø¯.</li>
            <li><strong>Ø§Ù„Ø¯Ù…Ø¬:</strong> Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªÙ„Ø§Ù…Ø³ Ù…Ø±Ø¨Ø¹Ø§Ù† ÙŠØ­Ù…Ù„Ø§Ù† Ù†ÙØ³ Ø§Ù„Ø±Ù‚Ù… (Ù…Ø«Ù„Ø§Ù‹ 2 Ùˆ 2)ØŒ ÙŠÙ†Ø¯Ù…Ø¬Ø§Ù† Ù„ÙŠØ´ÙƒÙ„Ø§ Ù…Ø±Ø¨Ø¹Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹ Ø¨Ù…Ø¬Ù…ÙˆØ¹Ù‡Ù…Ø§ (4).</li>
            <li><strong>Ø§Ù„Ù‡Ø¯Ù:</strong> Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¯Ù…Ø¬ (4 Ù…Ø¹ 4 Ù„ØªØµØ¨Ø­ 8ØŒ Ø«Ù… 16ØŒ 32...) Ø­ØªÙ‰ ØªØµÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø°ÙŠ ÙŠØ­Ù…Ù„ Ø§Ù„Ø±Ù‚Ù… <strong>2048</strong>.</li>
            <li><strong>Ø§Ù„Ø®Ø³Ø§Ø±Ø©:</strong> ØªÙ†ØªÙ‡ÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯Ù…Ø§ ØªÙ…ØªÙ„Ø¦ Ø§Ù„Ø´Ø¨ÙƒØ© ØªÙ…Ø§Ù…Ø§Ù‹ ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¯Ù…Ø¬ Ø£ÙŠ Ù…Ø±Ø¨Ø¹Ø§Øª.</li>
        </ul>

        <h2>Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ÙÙˆØ² ÙÙŠ 2048</h2>
        <p>Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… 2048ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©. Ø¥Ù„ÙŠÙƒ Ø£Ù‡Ù… Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„ØªÙŠ ÙŠØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ø§Ù„Ù…Ø­ØªØ±ÙÙˆÙ†:</p>
        <ol>
            <li><strong>Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø²Ø§ÙˆÙŠØ© (The Corner Strategy):</strong> Ø­Ø§ÙˆÙ„ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø£ÙƒØ¨Ø± Ù‚ÙŠÙ…ØªÙ‡ ÙÙŠ Ø¥Ø­Ø¯Ù‰ Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø´Ø¨ÙƒØ© (ÙŠÙØ¶Ù„ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø³ÙÙ„Ù‰ Ø§Ù„ÙŠÙ…Ù†Ù‰ Ø£Ùˆ Ø§Ù„ÙŠØ³Ø±Ù‰). Ù„Ø§ ØªØ­Ø±ÙƒÙ‡ Ù…Ù† Ù‡Ù†Ø§Ùƒ Ø£Ø¨Ø¯Ø§Ù‹ Ø¥Ù„Ø§ Ù„Ù„Ø¶Ø±ÙˆØ±Ø© Ø§Ù„Ù‚ØµÙˆÙ‰.</li>
            <li><strong>Ø±ØªØ¨ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªÙ†Ø§Ø²Ù„ÙŠØ§Ù‹:</strong> Ø­Ø§ÙˆÙ„ Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ù…Ø±ØªØ¨Ø©ØŒ Ø¨Ø­ÙŠØ« ÙŠÙƒÙˆÙ† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© ÙˆØ§Ù„Ø°ÙŠ ÙŠÙ„ÙŠÙ‡ Ø¨Ø¬Ø§Ù†Ø¨Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ù…Ù…Ø§ ÙŠØ³Ù‡Ù„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯Ù…Ø¬ Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„ (Chain Reaction).</li>
            <li><strong>ÙÙƒØ± Ø®Ø·ÙˆØ© Ù„Ù„Ø£Ù…Ø§Ù…:</strong> Ù‚Ø¨Ù„ ÙƒÙ„ Ø­Ø±ÙƒØ©ØŒ ØªØ®ÙŠÙ„ Ø£ÙŠÙ† Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙƒÙŠÙ Ø³ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ ØªØ±ØªÙŠØ¨ Ù„ÙˆØ­ØªÙƒ.</li>
        </ol>

        <h2>ÙÙˆØ§Ø¦Ø¯ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h2>
        <p>Ø£Ø«Ø¨ØªØª Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø£Ù† Ø£Ù„Ø¹Ø§Ø¨Ø§Ù‹ Ù…Ø«Ù„ 2048 ÙˆØ§Ù„Ø³ÙˆØ¯ÙˆÙƒÙˆ ØªØ³Ø§Ù‡Ù… ÙÙŠ ØªÙ†Ø´ÙŠØ· Ø§Ù„Ø°Ø§ÙƒØ±Ø©ØŒ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªØ±ÙƒÙŠØ²ØŒ ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªÙˆØªØ±. Ø¥Ù†Ù‡Ø§ Ø±ÙŠØ§Ø¶Ø© Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ù…Ø§Ø±Ø³ØªÙ‡Ø§ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª ÙˆÙ…ÙƒØ§Ù†.</p>

        <div class="footer-links">
            <p>&copy; 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
            <!-- Ù‡Ø°Ù‡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø´ÙƒÙ„ÙŠØ© ÙˆÙ…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹ Ù„Ø£Ø¯Ø³Ù†Ø³ -->
            <a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a> | 
            <a href="#">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a> | 
            <a href="#">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>
        </div>
    </div>

    <!-- Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…ØªØ¬Ø± -->
    <div class="modal-overlay" id="store-modal">
        <div class="modal-content">
            <h2 class="modal-title">ğŸ’ Ù…ØªØ¬Ø± Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>
            <p>Ù‚Ù… Ø¨ØªØ±Ù‚ÙŠØ© ØªØ¬Ø±Ø¨ØªÙƒ ÙˆØ§Ø¯Ø¹Ù… Ø§Ù„Ù…Ø·ÙˆØ±</p>
            <div class="store-item" onclick="simulatePurchase('undo_pack')">
                <div><strong>50 ØªØ±Ø§Ø¬Ø¹ Ø¥Ø¶Ø§ÙÙŠ</strong><br><small>ØµØ­Ø­ Ø£Ø®Ø·Ø§Ø¡Ùƒ ÙˆØ§Ø³ØªÙ…Ø±!</small></div>
                <span class="price-tag">100 Ø¬.Ù…</span>
            </div>
            <div class="store-item" onclick="simulatePurchase('no_ads')">
                <div><strong>Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</strong><br><small>Ø§Ø´ØªØ±Ø§Ùƒ Ø´Ù‡Ø±ÙŠ</small></div>
                <span class="price-tag">50 Ø¬.Ù… /Ø´Ù‡Ø±</span>
            </div>
            <div class="store-item" onclick="simulatePurchase('theme_pack')">
                <div><strong>Ø£Ù„ÙˆØ§Ù† Ø«ÙŠÙ…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</strong><br><small>ØºÙŠØ± Ø´ÙƒÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</small></div>
                <span class="price-tag"> 150 Ø¬.Ù… </span>
            </div>
            <button class="btn close-modal" onclick="closeStore()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        // =========================================================
        // Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„Ø¹Ø¨Ø© (JavaScript)
        // =========================================================

        const boardSize = 4;
        let board = [];
        let score = 0;
        let bestScore = localStorage.getItem('2048-best') || 0;
        let undoLimit = 3;
        let previousState = null;

        const boardElement = document.getElementById('game-board');
        const scoreElement = document.getElementById('score');
        const bestScoreElement = document.getElementById('best-score');
        const undoDisplay = document.getElementById('undo-display');

        bestScoreElement.innerText = bestScore;

        function startNewGame() {
            board = Array(boardSize * boardSize).fill(0);
            score = 0;
            scoreElement.innerText = 0;
            previousState = null;
            clearTiles();
            addRandomTile();
            addRandomTile();
            updateBoard();
            undoDisplay.innerText = undoLimit;
        }

        function clearTiles() {
            const tiles = document.querySelectorAll('.tile');
            tiles.forEach(tile => tile.remove());
        }

        function addRandomTile() {
            let emptyCells = [];
            board.forEach((val, index) => { if (val === 0) emptyCells.push(index); });
            if (emptyCells.length > 0) {
                let randIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                board[randIndex] = Math.random() > 0.9 ? 4 : 2;
            }
        }

        function updateBoard() {
            clearTiles();
            const width = boardElement.clientWidth / 4;
            board.forEach((val, index) => {
                if (val > 0) {
                    let tile = document.createElement('div');
                    tile.classList.add('tile', `tile-${val > 2048 ? 2048 : val}`);
                    tile.innerText = val;
                    let row = Math.floor(index / 4);
                    let col = index % 4;
                    tile.style.width = (width - 20) + 'px';
                    tile.style.height = (width - 20) + 'px';
                    tile.style.top = (row * width + 5) + 'px';
                    tile.style.left = (col * width + 5) + 'px';
                    boardElement.appendChild(tile);
                }
            });
        }

        function slide(row) {
            let arr = row.filter(val => val);
            let missing = boardSize - arr.length;
            let zeros = Array(missing).fill(0);
            arr = arr.concat(zeros);
            for (let i = 0; i < boardSize - 1; i++) {
                if (arr[i] !== 0 && arr[i] === arr[i + 1]) {
                    arr[i] *= 2; score += arr[i]; arr[i + 1] = 0;
                }
            }
            arr = arr.filter(val => val);
            missing = boardSize - arr.length;
            zeros = Array(missing).fill(0);
            return arr.concat(zeros);
        }

        function move(direction) {
            let oldBoard = [...board];
            let tempScore = score;

            if (direction === 'left' || direction === 'right') {
                for (let i = 0; i < boardSize; i++) {
                    let row = [];
                    for (let j = 0; j < boardSize; j++) row.push(board[i * 4 + j]);
                    let newRow = (direction === 'right') ? slide(row.reverse()).reverse() : slide(row);
                    for (let j = 0; j < boardSize; j++) board[i * 4 + j] = newRow[j];
                }
            } else if (direction === 'up' || direction === 'down') {
                for (let j = 0; j < boardSize; j++) {
                    let col = [];
                    for (let i = 0; i < boardSize; i++) col.push(board[i * 4 + j]);
                    let newCol = (direction === 'down') ? slide(col.reverse()).reverse() : slide(col);
                    for (let i = 0; i < boardSize; i++) board[i * 4 + j] = newCol[i];
                }
            }

            if (JSON.stringify(oldBoard) !== JSON.stringify(board)) {
                saveState(oldBoard, tempScore);
                addRandomTile();
                scoreElement.innerText = score;
                if (score > bestScore) {
                    bestScore = score;
                    localStorage.setItem('2048-best', bestScore);
                    bestScoreElement.innerText = bestScore;
                }
                updateBoard();
            }
        }

        // Keyboard & Touch
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') move('right');
            if (e.key === 'ArrowLeft') move('left');
            if (e.key === 'ArrowUp') move('up');
            if (e.key === 'ArrowDown') move('down');
        });

        let touchStartX = 0, touchStartY = 0;
        boardElement.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: false });

        boardElement.addEventListener('touchend', (e) => {
            e.preventDefault();
            let dx = e.changedTouches[0].screenX - touchStartX;
            let dy = e.changedTouches[0].screenY - touchStartY;
            if (Math.abs(dx) > Math.abs(dy)) {
                if (Math.abs(dx) > 10) (dx > 0) ? move('right') : move('left');
            } else {
                if (Math.abs(dy) > 10) (dy > 0) ? move('down') : move('up');
            }
        }, { passive: false });

        function saveState(oldBoard, oldScore) {
            previousState = { board: [...oldBoard], score: oldScore };
        }

        function undoMove() {
            if (undoLimit > 0) {
                if (previousState) {
                    board = previousState.board;
                    score = previousState.score;
                    scoreElement.innerText = score;
                    updateBoard();
                    previousState = null;
                    undoLimit--;
                    undoDisplay.innerText = undoLimit;
                } else {
                    alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø±ÙƒØ© Ø³Ø§Ø¨Ù‚Ø©!");
                }
            } else {
                openStore();
            }
        }

        function openStore() { document.getElementById('store-modal').style.display = 'flex'; }
        function closeStore() { document.getElementById('store-modal').style.display = 'none'; }
        function simulatePurchase(id) {
            alert("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...");
            setTimeout(() => {
                alert("ØªÙ…!"); if(id === 'undo_pack') { undoLimit+=50; undoDisplay.innerText = undoLimit; }
                closeStore();
            }, 500);
        }

        startNewGame();
        window.addEventListener('resize', updateBoard);

        // Firebase Init (Safe Mode)
        const firebaseConfig = {
            apiKey: "AIzaSyA03XF-ijDTp1C3jOcmo2ajZL4RvUlcZd0",
            authDomain: "gams-dca3f.firebaseapp.com",
            databaseURL: "https://gams-dca3f-default-rtdb.firebaseio.com",
            projectId: "gams-dca3f",
            storageBucket: "gams-dca3f.firebasestorage.app",
            messagingSenderId: "805484875796",
            appId: "1:805484875796:web:3f5390ad337f7f9c575701",
            measurementId: "G-R03SS18JVS"
        };
        try {
            if (typeof firebase !== 'undefined') firebase.initializeApp(firebaseConfig);
        } catch (e) { console.warn("Firebase skipped"); }
    </script>
</body>
</html>
